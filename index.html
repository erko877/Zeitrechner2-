<!DOCTYPE html>
<html lang="de" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>WorkTime Pro | Hybrid & Easy</title>
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/4305/4305432.png" type="image/png">

    <style>
        :root {
            --bg-gradient: radial-gradient(at 0% 0%, #1e1b4b 0, transparent 50%), radial-gradient(at 100% 0%, #312e81 0, transparent 50%), radial-gradient(at 100% 100%, #4338ca 0, transparent 50%), radial-gradient(at 0% 100%, #1e1b4b 0, transparent 50%);
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.15);
            --glass-text: #f8fafc;
            --primary: #818cf8;
            --success: #34d399;
            --danger: #fb7185;
            --accent: #22d3ee;
            --gold-gradient: linear-gradient(90deg, #bf953f, #fcf6ba, #b38728, #fbf5b7, #aa771c);
        }

        [data-theme="light"] {
            --bg-gradient: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            --glass: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(0, 0, 0, 0.05);
            --glass-text: #1e293b;
            --primary: #4f46e5;
        }

        * { box-sizing: border-box; font-family: 'Inter', -apple-system, sans-serif; margin: 0; padding: 0; transition: background 0.5s ease; }
        body { background: var(--bg-gradient); background-color: #0f172a; min-height: 100vh; display: flex; align-items: center; justify-content: center; color: var(--glass-text); padding: 10px; }
        .dashboard { width: 100%; max-width: 900px; display: grid; grid-template-columns: 1fr 1.4fr; gap: 20px; }
        @media (max-width: 800px) { .dashboard { grid-template-columns: 1fr; } body { align-items: flex-start; padding-top: 40px; } }

        .glass-card { background: var(--glass); backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px); border: 1px solid var(--glass-border); border-radius: 25px; padding: 25px; box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.5); }
        h1 { font-size: 22px; font-weight: 800; text-align: center; margin-bottom: 20px; background: linear-gradient(to right, #fff, var(--primary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        label { display: block; font-size: 10px; font-weight: 700; text-transform: uppercase; color: var(--primary); margin-bottom: 6px; }

        /* MODE SWITCH */
        .mode-selector { display: flex; background: rgba(0,0,0,0.2); padding: 5px; border-radius: 15px; margin-bottom: 20px; border: 1px solid var(--glass-border); }
        .mode-btn { flex: 1; padding: 10px; border: none; background: none; color: var(--glass-text); font-size: 11px; font-weight: 800; cursor: pointer; border-radius: 10px; }
        .mode-btn.active { background: var(--primary); color: white; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }

        .input-row { display: flex; gap: 8px; margin-bottom: 15px; }
        input { width: 100%; padding: 12px; border-radius: 12px; border: 1px solid var(--glass-border); background: rgba(0, 0, 0, 0.2); color: white; font-size: 16px; outline: none; }
        [data-theme="light"] input { background: rgba(255, 255, 255, 0.5); color: #1e293b; }
        .btn-icon { background: var(--primary); border: none; color: white; width: 48px; border-radius: 12px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 18px; }

        /* PRO MODE PHASEN */
        .phase-box { background: rgba(0,0,0,0.15); padding: 12px; border-radius: 15px; border: 1px solid var(--glass-border); margin-bottom: 10px; }
        .phase-controls { display: grid; grid-template-columns: 1fr 1fr 40px; gap: 8px; margin-bottom: 8px; }
        .btn-add-phase { width: 100%; padding: 10px; border-radius: 12px; border: 1px dashed var(--primary); background: none; color: var(--primary); font-weight: 800; cursor: pointer; margin-bottom: 15px; font-size: 11px; }

        .toggle-btn { padding: 8px; border-radius: 10px; border: 1px solid var(--glass-border); background: rgba(0,0,0,0.2); color: white; font-size: 10px; font-weight: bold; cursor: pointer; flex: 1; text-align: center; }
        .toggle-btn.active { background: var(--primary); border-color: var(--accent); }

        .progress-wrapper { position: relative; height: 16px; background: rgba(0,0,0,0.3); border-radius: 8px; margin: 25px 0; border: 1px solid var(--glass-border); overflow: hidden; }
        #progress-bar { height: 100%; width: 0%; background: var(--danger); transition: width 0.6s ease; }
        .gold-shimmer { background: var(--gold-gradient) !important; background-size: 200% auto !important; animation: shine 3s linear infinite; box-shadow: 0 0 20px rgba(212, 175, 55, 0.5) !important; }
        @keyframes shine { to { background-position: 200% center; } }
        .marker { position: absolute; left: 77.7%; top: 0; bottom: 0; width: 2px; background: white; z-index: 5; }

        .finish-card { background: linear-gradient(135deg, rgba(129, 140, 248, 0.2), rgba(34, 211, 238, 0.2)); border: 1px solid var(--glass-border); border-radius: 20px; padding: 20px; text-align: center; margin-bottom: 20px; }
        .finish-time { font-size: 32px; font-weight: 900; color: var(--accent); }

        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .stat-box { background: rgba(0,0,0,0.2); padding: 15px; border-radius: 18px; text-align: center; border: 1px solid var(--glass-border); }
        .save-btn { width: 100%; padding: 14px; border-radius: 15px; border: none; background: var(--success); color: #064e3b; font-weight: 800; font-size: 15px; cursor: pointer; margin-top: 15px; }

        /* HISTORIE */
        .history-item { display: flex; justify-content: space-between; align-items: center; padding: 12px 5px; border-bottom: 1px solid var(--glass-border); font-size: 12px; cursor: pointer; }
        .week-separator { margin-top: 20px; padding-bottom: 5px; border-bottom: 1.5px solid var(--accent); display: flex; justify-content: space-between; font-size: 10px; font-weight: 800; color: var(--accent); }
        .delete-btn { color: var(--danger); background: none; border: none; font-size: 18px; padding-left: 10px; cursor: pointer; }

        /* MODAL */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); backdrop-filter: blur(15px); display: none; align-items: center; justify-content: center; z-index: 1000; padding: 20px; }
        .modal-content { width: 100%; max-width: 400px; max-height: 90vh; overflow-y: auto; }

        .theme-toggle { position: fixed; top: 15px; right: 15px; background: var(--glass); border: 1px solid var(--glass-border); color: white; padding: 10px; border-radius: 50%; z-index: 100; cursor: pointer; }
    </style>
</head>
<body>

    <button class="theme-toggle" onclick="toggleTheme()">üåì</button>

    <!-- MODAL F√úR BEARBEITUNG -->
    <div class="modal-overlay" id="editModal">
        <div class="glass-card modal-content">
            <h1 id="editTitle">Eintrag bearbeiten</h1>
            <div id="editContainer"></div>
            <div style="display: flex; gap: 10px; margin-top:20px;">
                <button class="save-btn" onclick="applyEdit()" style="margin: 0;">Speichern</button>
                <button class="save-btn" onclick="closeEdit()" style="margin: 0; background: rgba(255,255,255,0.1); color: white;">Abbrechen</button>
            </div>
        </div>
    </div>

    <div class="dashboard">
        <div class="controls glass-card">
            <h1>WorkTime Pro</h1>
            
            <div class="mode-selector">
                <button id="modeEasy" class="mode-btn active" onclick="setMode('easy')">EASY MODE</button>
                <button id="modePro" class="mode-btn" onclick="setMode('pro')">PRO MODE</button>
            </div>

            <label>Soll-Arbeitszeit</label>
            <div class="input-row">
                <button id="btn7h" class="toggle-btn active" onclick="setTarget(420)">7 STUNDEN</button>
                <button id="btn8h" class="toggle-btn" onclick="setTarget(480)">8 STUNDEN</button>
            </div>

            <!-- EASY UI -->
            <div id="ui-easy">
                <label>Beginn</label>
                <div class="input-row">
                    <input type="time" id="start" value="08:00" oninput="calculate(); autoSave();">
                    <button class="btn-icon" onclick="setNow('start')">üïí</button>
                </div>
                <label>Ende</label>
                <div class="input-row">
                    <input type="time" id="end" value="15:30" oninput="calculate(); autoSave();">
                    <button class="btn-icon" onclick="setNow('end')">üïí</button>
                </div>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-bottom: 20px;">
                    <div><label>Pause (Min)</label><input type="number" id="pause" value="30" oninput="calculate(); autoSave();"></div>
                    <div><label>Ort</label><button id="hoToggle" class="toggle-btn" style="height:45px; width:100%" onclick="isEasyHO = !isEasyHO; updateEasyHO(); calculate(); autoSave();">üè¢ B√úRO</button></div>
                </div>
            </div>

            <!-- PRO UI -->
            <div id="ui-pro" style="display:none;">
                <label>Hybrid Phasen</label>
                <div id="phaseList"></div>
                <button class="btn-add-phase" onclick="addPhase()">+ PHASE HINZUF√úGEN</button>
                <label>Gesamt-Pause (Min)</label>
                <input type="number" id="proPause" value="0" oninput="calculate(); autoSave();" style="margin-bottom:20px;">
            </div>

            <div id="history-container" style="display:none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <label>Historie</label>
                    <button onclick="exportCSV()" style="font-size: 9px; padding: 4px 8px; background: none; border: 1px solid var(--glass-border); color: white; border-radius: 5px;">CSV Export</button>
                </div>
                <div id="history-list"></div>
            </div>
        </div>

        <div class="visuals glass-card">
            <div class="finish-card">
                <label id="finish-label" style="color: #fff; opacity: 0.7;">Feierabend-Ziel (7h)</label>
                <div id="predicted-end" class="finish-time">--:--</div>
            </div>
            <div class="progress-wrapper">
                <div id="marker-line" class="marker"></div>
                <div id="progress-bar"></div>
            </div>
            <div class="stats-grid">
                <div class="stat-box"><label>Netto</label><div id="net-total" style="font-size: 18px; font-weight: 800;">0h 0m</div></div>
                <div class="stat-box"><label>Saldo</label><div id="overtime" style="font-size: 18px; font-weight: 800;">0h 0m</div></div>
            </div>
            <button class="save-btn" onclick="saveDay()">TAG SPEICHERN</button>
            <p style="text-align: center; font-size: 9px; opacity: 0.3; margin-top: 15px;">&copy; Erko 2026</p>
        </div>
    </div>

    <script>
        let mode = 'easy';
        let targetMin = 420;
        let isEasyHO = false;
        let proPhases = [{ id: Date.now(), s: "08:00", e: "12:00", ho: true }];
        let editingId = null;

        function setMode(m) {
            mode = m;
            document.getElementById('modeEasy').classList.toggle('active', m === 'easy');
            document.getElementById('modePro').classList.toggle('active', m === 'pro');
            document.getElementById('ui-easy').style.display = m === 'easy' ? 'block' : 'none';
            document.getElementById('ui-pro').style.display = m === 'pro' ? 'block' : 'none';
            if(m === 'pro') renderPhases();
            calculate();
        }

        function setTarget(min) {
            targetMin = min;
            document.getElementById('btn7h').classList.toggle('active', min === 420);
            document.getElementById('btn8h').classList.toggle('active', min === 480);
            document.getElementById('finish-label').innerText = `Feierabend-Ziel (${min/60}h)`;
            document.getElementById('marker-line').style.left = (min / 540 * 100) + "%";
            calculate();
        }

        function updateEasyHO() {
            const btn = document.getElementById('hoToggle');
            btn.classList.toggle('active', isEasyHO);
            btn.innerText = isEasyHO ? "üè† HOMEOFFICE" : "üè¢ B√úRO";
        }

        // --- PRO MODE LOGIK ---
        function addPhase() {
            const last = proPhases[proPhases.length-1];
            proPhases.push({ id: Date.now(), s: last ? last.e : "12:00", e: "", ho: false });
            renderPhases();
            calculate();
        }

        function renderPhases() {
            const list = document.getElementById('phaseList');
            list.innerHTML = "";
            proPhases.forEach(p => {
                const div = document.createElement('div');
                div.className = "phase-box";
                div.innerHTML = `
                    <div class="phase-controls">
                        <input type="time" value="${p.s}" oninput="updatePhase(${p.id}, 's', this.value)">
                        <input type="time" value="${p.e}" oninput="updatePhase(${p.id}, 'e', this.value)">
                        <button class="delete-btn" onclick="removePhase(${p.id})" style="padding:0">√ó</button>
                    </div>
                    <div style="display:flex; gap:5px;">
                        <button class="toggle-btn ${p.ho?'active':''}" onclick="updatePhase(${p.id}, 'ho', true); renderPhases();">üè† HO</button>
                        <button class="toggle-btn ${!p.ho?'active':''}" onclick="updatePhase(${p.id}, 'ho', false); renderPhases();">üè¢ B√úRO</button>
                    </div>`;
                list.appendChild(div);
            });
        }

        function updatePhase(id, field, val) {
            const p = proPhases.find(x => x.id === id);
            if(p) { p[field] = val; calculate(); autoSave(); }
        }

        function removePhase(id) {
            if(proPhases.length > 1) { proPhases = proPhases.filter(p => p.id !== id); renderPhases(); calculate(); }
        }

        // --- BERECHNUNG ---
        function calculate() {
            let net = 0;
            let firstStart = 0;

            if (mode === 'easy') {
                const s = document.getElementById('start').value;
                const e = document.getElementById('end').value;
                const p = parseInt(document.getElementById('pause').value) || 0;
                if(s && e) {
                    const [sh, sm] = s.split(':').map(Number);
                    const [eh, em] = e.split(':').map(Number);
                    firstStart = sh * 60 + sm;
                    let diff = (eh * 60 + em) - firstStart;
                    if(diff < 0) diff += 1440;
                    net = diff - p;
                }
            } else {
                const pPause = parseInt(document.getElementById('proPause').value) || 0;
                proPhases.forEach((p, i) => {
                    if(p.s && p.e) {
                        const [sh, sm] = p.s.split(':').map(Number);
                        const [eh, em] = p.e.split(':').map(Number);
                        if(i === 0) firstStart = sh * 60 + sm;
                        let diff = (eh * 60 + em) - (sh * 60 + sm);
                        if(diff < 0) diff += 1440;
                        net += diff;
                    }
                });
                net -= pPause;
            }

            document.getElementById('net-total').innerText = formatTime(net);
            const over = net - targetMin;
            const ovEl = document.getElementById('overtime');
            ovEl.innerText = (over >= 0 ? "+" : "") + formatTime(over);
            ovEl.style.color = over >= 0 ? "var(--success)" : "var(--danger)";

            const bar = document.getElementById('progress-bar');
            bar.style.width = Math.min((net / 540) * 100, 100) + "%";
            bar.classList.toggle('gold-shimmer', net > targetMin);
            bar.style.background = net >= targetMin ? "var(--success)" : "var(--danger)";

            if(firstStart > 0) {
                const p = mode === 'easy' ? (parseInt(document.getElementById('pause').value) || 0) : (parseInt(document.getElementById('proPause').value) || 0);
                const fMin = firstStart + targetMin + p;
                const fh = Math.floor((fMin % 1440) / 60);
                const fm = fMin % 60;
                document.getElementById('predicted-end').innerText = `${String(fh).padStart(2,'0')}:${String(fm).padStart(2,'0')} Uhr`;
            }
        }

        function formatTime(m) { const a = Math.abs(m); return `${Math.floor(a/60)}h ${a%60}m`; }

        // --- SPEICHERN & HISTORIE ---
        function saveDay() {
            const now = new Date();
            const data = {
                id: Date.now(),
                mode: mode,
                target: targetMin,
                dateDisp: now.toLocaleDateString('de-DE', {weekday: 'short', day: '2-digit', month: '2-digit'}),
                fullDate: now.toLocaleDateString('de-DE'),
                week: getWeekNumber(now),
                year: now.getFullYear(),
                // Easy Daten
                easy: { s: document.getElementById('start').value, e: document.getElementById('end').value, p: document.getElementById('pause').value, ho: isEasyHO },
                // Pro Daten
                pro: { phases: JSON.parse(JSON.stringify(proPhases)), pause: document.getElementById('proPause').value },
                netMin: parseNet(document.getElementById('net-total').innerText)
            };
            let h = JSON.parse(localStorage.getItem('erko_final_hist') || '[]');
            h.unshift(data);
            localStorage.setItem('erko_final_hist', JSON.stringify(h));
            renderHistory();
        }

        function parseNet(s) { const pts = s.split(' '); return parseInt(pts[0])*60 + parseInt(pts[1]); }

        function renderHistory() {
            const h = JSON.parse(localStorage.getItem('erko_final_hist') || '[]');
            if(h.length === 0) { document.getElementById('history-container').style.display = 'none'; return; }
            document.getElementById('history-container').style.display = 'block';
            let html = ""; let cw = ""; let ws = 0;

            h.forEach((item, idx) => {
                const wk = `${item.year}-W${item.week}`;
                if (cw !== "" && cw !== wk) {
                    html += `<div class="week-separator"><span>KW ${cw.split('-W')[1]}</span><span>${formatTime(ws)}</span></div>`;
                    ws = 0;
                }
                cw = wk; ws += item.netMin;
                const over = item.netMin - item.target;
                const icons = item.mode === 'easy' ? (item.easy.ho ? 'üè†' : 'üè¢') : [...new Set(item.pro.phases.map(p => p.ho ? 'üè†' : 'üè¢'))].join('');

                html += `
                    <div class="history-item" onclick="openEdit(${item.id})">
                        <div><b>${item.dateDisp}</b> ${icons}</div>
                        <div style="display:flex; align-items:center; gap:10px;">
                            <span style="color:${over >= 0 ? 'var(--success)' : 'var(--danger)'}; font-weight:bold;">${(over >= 0 ? '+':'-') + formatTime(over)}</span>
                            <button class="delete-btn" onclick="event.stopPropagation(); deleteDay(${item.id})">√ó</button>
                        </div>
                    </div>`;
                if (idx === h.length - 1) html += `<div class="week-separator"><span>KW ${wk.split('-W')[1]}</span><span>${formatTime(ws)}</span></div>`;
            });
            document.getElementById('history-list').innerHTML = html;
        }

        // --- EDIT MODAL ---
        function openEdit(id) {
            editingId = id;
            const h = JSON.parse(localStorage.getItem('erko_final_hist'));
            const item = h.find(i => i.id === id);
            const container = document.getElementById('editContainer');
            container.innerHTML = "";

            if(item.mode === 'easy') {
                container.innerHTML = `
                    <label>Start</label><input type="time" id="edS" value="${item.easy.s}" style="margin-bottom:10px">
                    <label>Ende</label><input type="time" id="edE" value="${item.easy.e}" style="margin-bottom:10px">
                    <label>Pause</label><input type="number" id="edP" value="${item.easy.p}" style="margin-bottom:10px">
                    <button class="toggle-btn ${item.easy.ho?'active':''}" id="edHO" onclick="this.classList.toggle('active'); this.innerText = this.classList.contains('active') ? 'üè† HO' : 'üè¢ B√úRO'">${item.easy.ho?'üè† HO':'üè¢ B√úRO'}</button>
                `;
            } else {
                item.pro.phases.forEach((p, i) => {
                    container.innerHTML += `
                        <div class="phase-box" style="margin-bottom:10px">
                            <label>Phase ${i+1}</label>
                            <div class="phase-controls">
                                <input type="time" class="edPS" value="${p.s}">
                                <input type="time" class="edPE" value="${p.e}">
                            </div>
                            <button class="toggle-btn ${p.ho?'active':''}" onclick="this.classList.toggle('active'); this.innerText = this.classList.contains('active') ? 'üè† HO' : 'üè¢ B√úRO'">${p.ho?'üè† HO':'üè¢ B√úRO'}</button>
                        </div>`;
                });
                container.innerHTML += `<label>Gesamt-Pause</label><input type="number" id="edPP" value="${item.pro.pause}">`;
            }
            document.getElementById('editModal').style.display = 'flex';
        }

        function applyEdit() {
            let h = JSON.parse(localStorage.getItem('erko_final_hist'));
            const item = h.find(i => i.id === editingId);
            let net = 0;

            if(item.mode === 'easy') {
                item.easy.s = document.getElementById('edS').value;
                item.easy.e = document.getElementById('edE').value;
                item.easy.p = parseInt(document.getElementById('edP').value) || 0;
                item.easy.ho = document.getElementById('edHO').classList.contains('active');
                
                const [sh, sm] = item.easy.s.split(':').map(Number);
                const [eh, em] = item.easy.e.split(':').map(Number);
                let diff = (eh*60+em)-(sh*60+sm);
                if(diff < 0) diff += 1440;
                net = diff - item.easy.p;
            } else {
                const sInp = document.querySelectorAll('.edPS');
                const eInp = document.querySelectorAll('.edPE');
                const hoInp = document.querySelectorAll('.modal-content .toggle-btn');
                const pP = parseInt(document.getElementById('edPP').value) || 0;
                
                item.pro.phases.forEach((p, i) => {
                    p.s = sInp[i].value;
                    p.e = eInp[i].value;
                    p.ho = hoInp[i].classList.contains('active');
                    const [sh, sm] = p.s.split(':').map(Number);
                    const [eh, em] = p.e.split(':').map(Number);
                    let d = (eh*60+em)-(sh*60+sm);
                    if(d < 0) d += 1440;
                    net += d;
                });
                item.pro.pause = pP;
                net -= pP;
            }
            item.netMin = net;
            localStorage.setItem('erko_final_hist', JSON.stringify(h));
            renderHistory(); closeEdit();
        }

        function closeEdit() { document.getElementById('editModal').style.display = 'none'; }
        function deleteDay(id) { if(confirm("L√∂schen?")) { let h = JSON.parse(localStorage.getItem('erko_final_hist')); h = h.filter(i => i.id !== id); localStorage.setItem('erko_final_hist', JSON.stringify(h)); renderHistory(); } }
        function getWeekNumber(d) { d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate())); d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7)); var s = new Date(Date.UTC(d.getUTCFullYear(), 0, 1)); return Math.ceil((((d - s) / 86400000) + 1) / 7); }
        function setNow(id) { const d = new Date(); document.getElementById(id).value = d.getHours().toString().padStart(2,'0') + ":" + d.getMinutes().toString().padStart(2,'0'); calculate(); autoSave(); }

        function autoSave() {
            const data = { mode, targetMin, isEasyHO, easy: { s: document.getElementById('start').value, e: document.getElementById('end').value, p: document.getElementById('pause').value }, pro: { phases: proPhases, pause: document.getElementById('proPause').value } };
            localStorage.setItem('erko_live', JSON.stringify(data));
        }

        function load() {
            const live = JSON.parse(localStorage.getItem('erko_live'));
            if(live) {
                targetMin = live.targetMin || 420;
                isEasyHO = live.isEasyHO;
                document.getElementById('start').value = live.easy.s;
                document.getElementById('end').value = live.easy.e;
                document.getElementById('pause').value = live.easy.p;
                document.getElementById('proPause').value = live.pro.pause;
                proPhases = live.pro.phases;
                setMode(live.mode || 'easy');
                setTarget(targetMin);
                updateEasyHO();
            }
            renderHistory(); calculate();
        }

        function exportCSV() {
            const h = JSON.parse(localStorage.getItem('erko_final_hist') || '[]');
            if (h.length === 0) return;
            let csv = "data:text/csv;charset=utf-8,Tag;Datum;Modus;Netto;Saldo\n";
            h.sort((a,b) => a.id - b.id).forEach(i => {
                const over = i.netMin - i.target;
                csv += `${i.dateDisp.split(',')[0]};${i.fullDate};${i.mode};${formatTime(i.netMin)};${(over>=0?'+':'-')+formatTime(over)}\n`;
            });
            const link = document.createElement("a");
            link.setAttribute("href", encodeURI(csv));
            link.setAttribute("download", "Arbeitsstunden.csv");
            link.click();
        }

        window.onload = load;
    </script>
</body>
</html>